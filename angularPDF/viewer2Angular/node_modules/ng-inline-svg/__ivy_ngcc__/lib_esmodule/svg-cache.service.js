import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/common';
import * as ɵngcc2 from '@angular/common/http';
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
import { APP_BASE_HREF, PlatformLocation } from '@angular/common';
import { HttpBackend, HttpClient } from '@angular/common/http';
import { Inject, Injectable, Optional, RendererFactory2 } from '@angular/core';
import { of } from 'rxjs';
import { finalize, map, share } from 'rxjs/operators';
import { InlineSVGConfig } from './inline-svg.config';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "./inline-svg.config";
import * as i3 from "@angular/common/http";
var SVGCacheService = (function () {
    function SVGCacheService(_appBase, _location, _config, httpClient, httpBackend, rendererFactory) {
        this._appBase = _appBase;
        this._location = _location;
        this._config = _config;
        this._http = _config && !_config.bypassHttpClientInterceptorChain
            ? httpClient
            : new HttpClient(httpBackend);
        this._renderer = rendererFactory.createRenderer(null, null);
        this.setBaseUrl();
        if (!SVGCacheService_1._cache) {
            SVGCacheService_1._cache = new Map();
        }
        if (!SVGCacheService_1._inProgressReqs) {
            SVGCacheService_1._inProgressReqs = new Map();
        }
    }
    SVGCacheService_1 = SVGCacheService;
    SVGCacheService.prototype.getSVG = function (url, resolveSVGUrl, cache) {
        var _this = this;
        if (cache === void 0) { cache = true; }
        var svgUrl = resolveSVGUrl
            ? this.getAbsoluteUrl(url)
            : url;
        if (cache && SVGCacheService_1._cache.has(svgUrl)) {
            return of(this._cloneSVG(SVGCacheService_1._cache.get(svgUrl)));
        }
        if (SVGCacheService_1._inProgressReqs.has(svgUrl)) {
            return SVGCacheService_1._inProgressReqs.get(svgUrl);
        }
        var req = this._http.get(svgUrl, { responseType: 'text' })
            .pipe(finalize(function () {
            SVGCacheService_1._inProgressReqs.delete(svgUrl);
        }), share(), map(function (svgText) {
            var svgEl = _this._svgElementFromString(svgText);
            SVGCacheService_1._cache.set(svgUrl, svgEl);
            return _this._cloneSVG(svgEl);
        }));
        SVGCacheService_1._inProgressReqs.set(svgUrl, req);
        return req;
    };
    SVGCacheService.prototype.setBaseUrl = function () {
        if (this._config) {
            this._baseUrl = this._config.baseUrl;
        }
        else if (this._appBase !== null) {
            this._baseUrl = this._appBase;
        }
        else if (this._location !== null) {
            this._baseUrl = this._location.getBaseHrefFromDOM();
        }
    };
    SVGCacheService.prototype.getAbsoluteUrl = function (url) {
        if (this._baseUrl && !/^https?:\/\//i.test(url)) {
            url = this._baseUrl + url;
            if (url.indexOf('//') === 0) {
                url = url.substring(1);
            }
        }
        var base = this._renderer.createElement('BASE');
        base.href = url;
        return base.href;
    };
    SVGCacheService.prototype._svgElementFromString = function (str) {
        var div = this._renderer.createElement('DIV');
        div.innerHTML = str;
        var svg = div.querySelector('svg');
        if (!svg) {
            throw new Error('No SVG found in loaded contents');
        }
        return svg;
    };
    SVGCacheService.prototype._cloneSVG = function (svg) {
        return svg.cloneNode(true);
    };
    var SVGCacheService_1;
    SVGCacheService.ngInjectableDef = i0.ɵɵdefineInjectable({ factory: function SVGCacheService_Factory() { return new SVGCacheService(i0.ɵɵinject(i1.APP_BASE_HREF, 8), i0.ɵɵinject(i1.PlatformLocation, 8), i0.ɵɵinject(i2.InlineSVGConfig, 8), i0.ɵɵinject(i3.HttpClient), i0.ɵɵinject(i3.HttpBackend), i0.ɵɵinject(i0.RendererFactory2)); }, token: SVGCacheService, providedIn: "root" });
    SVGCacheService = SVGCacheService_1 = __decorate([ __param(0, Optional()), __param(0, Inject(APP_BASE_HREF)),
        __param(1, Optional()),
        __param(2, Optional()),
        __metadata("design:paramtypes", [String, PlatformLocation,
            InlineSVGConfig,
            HttpClient,
            HttpBackend,
            RendererFactory2])
    ], SVGCacheService);
SVGCacheService.ɵfac = function SVGCacheService_Factory(t) { return new (t || SVGCacheService)(ɵngcc0.ɵɵinject(APP_BASE_HREF, 8), ɵngcc0.ɵɵinject(ɵngcc1.PlatformLocation, 8), ɵngcc0.ɵɵinject(InlineSVGConfig, 8), ɵngcc0.ɵɵinject(ɵngcc2.HttpClient), ɵngcc0.ɵɵinject(ɵngcc2.HttpBackend), ɵngcc0.ɵɵinject(ɵngcc0.RendererFactory2)); };
SVGCacheService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: SVGCacheService, factory: function (t) { return SVGCacheService.ɵfac(t); }, providedIn: 'root' });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(SVGCacheService, [{
        type: Injectable,
        args: [{
                providedIn: 'root'
            }]
    }], function () { return [{ type: String, decorators: [{
                type: Optional
            }, {
                type: Inject,
                args: [APP_BASE_HREF]
            }] }, { type: ɵngcc1.PlatformLocation, decorators: [{
                type: Optional
            }] }, { type: InlineSVGConfig, decorators: [{
                type: Optional
            }] }, { type: ɵngcc2.HttpClient }, { type: ɵngcc2.HttpBackend }, { type: ɵngcc0.RendererFactory2 }]; }, null); })();
    return SVGCacheService;
}());
export { SVGCacheService };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3ZnLWNhY2hlLnNlcnZpY2UuanMiLCJzb3VyY2VzIjpbInN2Zy1jYWNoZS5zZXJ2aWNlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUlPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Z0lBQXdCO0FBQ3hCO0FBQ0E7QUFDQSIsInNvdXJjZXNDb250ZW50IjpbInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbnZhciBfX21ldGFkYXRhID0gKHRoaXMgJiYgdGhpcy5fX21ldGFkYXRhKSB8fCBmdW5jdGlvbiAoaywgdikge1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShrLCB2KTtcbn07XG52YXIgX19wYXJhbSA9ICh0aGlzICYmIHRoaXMuX19wYXJhbSkgfHwgZnVuY3Rpb24gKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxufTtcbmltcG9ydCB7IEFQUF9CQVNFX0hSRUYsIFBsYXRmb3JtTG9jYXRpb24gfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgSHR0cEJhY2tlbmQsIEh0dHBDbGllbnQgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBJbmplY3QsIEluamVjdGFibGUsIE9wdGlvbmFsLCBSZW5kZXJlckZhY3RvcnkyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBvZiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgZmluYWxpemUsIG1hcCwgc2hhcmUgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBJbmxpbmVTVkdDb25maWcgfSBmcm9tICcuL2lubGluZS1zdmcuY29uZmlnJztcbmltcG9ydCAqIGFzIGkwIGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQgKiBhcyBpMSBmcm9tIFwiQGFuZ3VsYXIvY29tbW9uXCI7XG5pbXBvcnQgKiBhcyBpMiBmcm9tIFwiLi9pbmxpbmUtc3ZnLmNvbmZpZ1wiO1xuaW1wb3J0ICogYXMgaTMgZnJvbSBcIkBhbmd1bGFyL2NvbW1vbi9odHRwXCI7XG52YXIgU1ZHQ2FjaGVTZXJ2aWNlID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTVkdDYWNoZVNlcnZpY2UoX2FwcEJhc2UsIF9sb2NhdGlvbiwgX2NvbmZpZywgaHR0cENsaWVudCwgaHR0cEJhY2tlbmQsIHJlbmRlcmVyRmFjdG9yeSkge1xuICAgICAgICB0aGlzLl9hcHBCYXNlID0gX2FwcEJhc2U7XG4gICAgICAgIHRoaXMuX2xvY2F0aW9uID0gX2xvY2F0aW9uO1xuICAgICAgICB0aGlzLl9jb25maWcgPSBfY29uZmlnO1xuICAgICAgICB0aGlzLl9odHRwID0gX2NvbmZpZyAmJiAhX2NvbmZpZy5ieXBhc3NIdHRwQ2xpZW50SW50ZXJjZXB0b3JDaGFpblxuICAgICAgICAgICAgPyBodHRwQ2xpZW50XG4gICAgICAgICAgICA6IG5ldyBIdHRwQ2xpZW50KGh0dHBCYWNrZW5kKTtcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlckZhY3RvcnkuY3JlYXRlUmVuZGVyZXIobnVsbCwgbnVsbCk7XG4gICAgICAgIHRoaXMuc2V0QmFzZVVybCgpO1xuICAgICAgICBpZiAoIVNWR0NhY2hlU2VydmljZV8xLl9jYWNoZSkge1xuICAgICAgICAgICAgU1ZHQ2FjaGVTZXJ2aWNlXzEuX2NhY2hlID0gbmV3IE1hcCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghU1ZHQ2FjaGVTZXJ2aWNlXzEuX2luUHJvZ3Jlc3NSZXFzKSB7XG4gICAgICAgICAgICBTVkdDYWNoZVNlcnZpY2VfMS5faW5Qcm9ncmVzc1JlcXMgPSBuZXcgTWFwKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgU1ZHQ2FjaGVTZXJ2aWNlXzEgPSBTVkdDYWNoZVNlcnZpY2U7XG4gICAgU1ZHQ2FjaGVTZXJ2aWNlLnByb3RvdHlwZS5nZXRTVkcgPSBmdW5jdGlvbiAodXJsLCByZXNvbHZlU1ZHVXJsLCBjYWNoZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoY2FjaGUgPT09IHZvaWQgMCkgeyBjYWNoZSA9IHRydWU7IH1cbiAgICAgICAgdmFyIHN2Z1VybCA9IHJlc29sdmVTVkdVcmxcbiAgICAgICAgICAgID8gdGhpcy5nZXRBYnNvbHV0ZVVybCh1cmwpXG4gICAgICAgICAgICA6IHVybDtcbiAgICAgICAgaWYgKGNhY2hlICYmIFNWR0NhY2hlU2VydmljZV8xLl9jYWNoZS5oYXMoc3ZnVXJsKSkge1xuICAgICAgICAgICAgcmV0dXJuIG9mKHRoaXMuX2Nsb25lU1ZHKFNWR0NhY2hlU2VydmljZV8xLl9jYWNoZS5nZXQoc3ZnVXJsKSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChTVkdDYWNoZVNlcnZpY2VfMS5faW5Qcm9ncmVzc1JlcXMuaGFzKHN2Z1VybCkpIHtcbiAgICAgICAgICAgIHJldHVybiBTVkdDYWNoZVNlcnZpY2VfMS5faW5Qcm9ncmVzc1JlcXMuZ2V0KHN2Z1VybCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlcSA9IHRoaXMuX2h0dHAuZ2V0KHN2Z1VybCwgeyByZXNwb25zZVR5cGU6ICd0ZXh0JyB9KVxuICAgICAgICAgICAgLnBpcGUoZmluYWxpemUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgU1ZHQ2FjaGVTZXJ2aWNlXzEuX2luUHJvZ3Jlc3NSZXFzLmRlbGV0ZShzdmdVcmwpO1xuICAgICAgICB9KSwgc2hhcmUoKSwgbWFwKGZ1bmN0aW9uIChzdmdUZXh0KSB7XG4gICAgICAgICAgICB2YXIgc3ZnRWwgPSBfdGhpcy5fc3ZnRWxlbWVudEZyb21TdHJpbmcoc3ZnVGV4dCk7XG4gICAgICAgICAgICBTVkdDYWNoZVNlcnZpY2VfMS5fY2FjaGUuc2V0KHN2Z1VybCwgc3ZnRWwpO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLl9jbG9uZVNWRyhzdmdFbCk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgU1ZHQ2FjaGVTZXJ2aWNlXzEuX2luUHJvZ3Jlc3NSZXFzLnNldChzdmdVcmwsIHJlcSk7XG4gICAgICAgIHJldHVybiByZXE7XG4gICAgfTtcbiAgICBTVkdDYWNoZVNlcnZpY2UucHJvdG90eXBlLnNldEJhc2VVcmwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLl9jb25maWcpIHtcbiAgICAgICAgICAgIHRoaXMuX2Jhc2VVcmwgPSB0aGlzLl9jb25maWcuYmFzZVVybDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLl9hcHBCYXNlICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9iYXNlVXJsID0gdGhpcy5fYXBwQmFzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLl9sb2NhdGlvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5fYmFzZVVybCA9IHRoaXMuX2xvY2F0aW9uLmdldEJhc2VIcmVmRnJvbURPTSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTVkdDYWNoZVNlcnZpY2UucHJvdG90eXBlLmdldEFic29sdXRlVXJsID0gZnVuY3Rpb24gKHVybCkge1xuICAgICAgICBpZiAodGhpcy5fYmFzZVVybCAmJiAhL15odHRwcz86XFwvXFwvL2kudGVzdCh1cmwpKSB7XG4gICAgICAgICAgICB1cmwgPSB0aGlzLl9iYXNlVXJsICsgdXJsO1xuICAgICAgICAgICAgaWYgKHVybC5pbmRleE9mKCcvLycpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdXJsID0gdXJsLnN1YnN0cmluZygxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgYmFzZSA9IHRoaXMuX3JlbmRlcmVyLmNyZWF0ZUVsZW1lbnQoJ0JBU0UnKTtcbiAgICAgICAgYmFzZS5ocmVmID0gdXJsO1xuICAgICAgICByZXR1cm4gYmFzZS5ocmVmO1xuICAgIH07XG4gICAgU1ZHQ2FjaGVTZXJ2aWNlLnByb3RvdHlwZS5fc3ZnRWxlbWVudEZyb21TdHJpbmcgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIHZhciBkaXYgPSB0aGlzLl9yZW5kZXJlci5jcmVhdGVFbGVtZW50KCdESVYnKTtcbiAgICAgICAgZGl2LmlubmVySFRNTCA9IHN0cjtcbiAgICAgICAgdmFyIHN2ZyA9IGRpdi5xdWVyeVNlbGVjdG9yKCdzdmcnKTtcbiAgICAgICAgaWYgKCFzdmcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gU1ZHIGZvdW5kIGluIGxvYWRlZCBjb250ZW50cycpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdmc7XG4gICAgfTtcbiAgICBTVkdDYWNoZVNlcnZpY2UucHJvdG90eXBlLl9jbG9uZVNWRyA9IGZ1bmN0aW9uIChzdmcpIHtcbiAgICAgICAgcmV0dXJuIHN2Zy5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgfTtcbiAgICB2YXIgU1ZHQ2FjaGVTZXJ2aWNlXzE7XG4gICAgU1ZHQ2FjaGVTZXJ2aWNlLm5nSW5qZWN0YWJsZURlZiA9IGkwLsm1ybVkZWZpbmVJbmplY3RhYmxlKHsgZmFjdG9yeTogZnVuY3Rpb24gU1ZHQ2FjaGVTZXJ2aWNlX0ZhY3RvcnkoKSB7IHJldHVybiBuZXcgU1ZHQ2FjaGVTZXJ2aWNlKGkwLsm1ybVpbmplY3QoaTEuQVBQX0JBU0VfSFJFRiwgOCksIGkwLsm1ybVpbmplY3QoaTEuUGxhdGZvcm1Mb2NhdGlvbiwgOCksIGkwLsm1ybVpbmplY3QoaTIuSW5saW5lU1ZHQ29uZmlnLCA4KSwgaTAuybXJtWluamVjdChpMy5IdHRwQ2xpZW50KSwgaTAuybXJtWluamVjdChpMy5IdHRwQmFja2VuZCksIGkwLsm1ybVpbmplY3QoaTAuUmVuZGVyZXJGYWN0b3J5MikpOyB9LCB0b2tlbjogU1ZHQ2FjaGVTZXJ2aWNlLCBwcm92aWRlZEluOiBcInJvb3RcIiB9KTtcbiAgICBTVkdDYWNoZVNlcnZpY2UgPSBTVkdDYWNoZVNlcnZpY2VfMSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBJbmplY3RhYmxlKHtcbiAgICAgICAgICAgIHByb3ZpZGVkSW46ICdyb290J1xuICAgICAgICB9KSxcbiAgICAgICAgX19wYXJhbSgwLCBPcHRpb25hbCgpKSwgX19wYXJhbSgwLCBJbmplY3QoQVBQX0JBU0VfSFJFRikpLFxuICAgICAgICBfX3BhcmFtKDEsIE9wdGlvbmFsKCkpLFxuICAgICAgICBfX3BhcmFtKDIsIE9wdGlvbmFsKCkpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW1N0cmluZywgUGxhdGZvcm1Mb2NhdGlvbixcbiAgICAgICAgICAgIElubGluZVNWR0NvbmZpZyxcbiAgICAgICAgICAgIEh0dHBDbGllbnQsXG4gICAgICAgICAgICBIdHRwQmFja2VuZCxcbiAgICAgICAgICAgIFJlbmRlcmVyRmFjdG9yeTJdKVxuICAgIF0sIFNWR0NhY2hlU2VydmljZSk7XG4gICAgcmV0dXJuIFNWR0NhY2hlU2VydmljZTtcbn0oKSk7XG5leHBvcnQgeyBTVkdDYWNoZVNlcnZpY2UgfTtcbiJdfQ==